<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="https://id.ppdb.mtsn4jombang.org/assets/img/logo/logo722.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TP Generator - MTsN 4 Jombang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Robust Polyfill untuk process.env
      window.process = window.process || {};
      window.process.env = window.process.env || {};
      
      // PENTING: Jika Anda mengalami error "API Key", silakan tempel API Key Anda di dalam tanda kutip di bawah ini.
      // Ini adalah solusi paling ampuh untuk aplikasi browser statis (Netlify/Vercel) jika Env Var tidak terbaca.
      window.process.env.API_KEY = ""; 

      // Global Error Handler
      window.addEventListener('error', function(e) {
        const root = document.getElementById('root');
        // Tampilkan error hanya jika aplikasi stuck di loading spinner
        if (root && root.innerHTML.includes('animate-spin')) {
            root.innerHTML = `
                <div class="flex flex-col items-center justify-center min-h-screen p-4 text-center">
                    <div class="bg-red-50 border border-red-200 rounded-lg p-6 max-w-lg shadow-lg">
                        <h2 class="text-xl font-bold text-red-700 mb-2">Gagal Memuat Aplikasi</h2>
                        <p class="text-red-600 mb-4">${e.message}</p>
                        <p class="text-sm text-slate-500">Silakan refresh halaman atau periksa konfigurasi API Key di index.html.</p>
                        <button onclick="window.location.reload()" class="mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition">Coba Lagi</button>
                    </div>
                </div>
            `;
        }
      });
    </script>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0"
  }
}
</script>
</head>
  <body class="bg-slate-50">
    <div id="root">
      <!-- Loading spinner default -->
      <div class="flex items-center justify-center min-h-screen">
        <div class="w-16 h-16 border-4 border-teal-500 border-t-transparent rounded-full animate-spin"></div>
      </div>
    </div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>